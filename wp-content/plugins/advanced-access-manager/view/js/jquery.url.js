// JQuery URL Parser plugin - https://github.com/allmarkedup/jQuery-URL-Parser
// Written by Mark Perkins, mark@allmarkedup.com
// License: http://unlicense.org/ (i.e. do what you want with it!)
(function(e,c){function g(b,c){for(var a=decodeURI(b),a=h[c?"strict":"loose"].exec(a),d={attr:{},param:{},seg:{}},f=14;f--;)d.attr[i[f]]=a[f]||"";d.param.query={};d.param.fragment={};d.attr.query.replace(j,function(a,b,c){b&&(d.param.query[b]=c)});d.attr.fragment.replace(k,function(a,b,c){b&&(d.param.fragment[b]=c)});d.seg.path=d.attr.path.replace(/^\/+|\/+$/g,"").split("/");d.seg.fragment=d.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");d.attr.base=d.attr.host?d.attr.protocol+"://"+d.attr.host+ (d.attr.port?":"+d.attr.port:""):"";return d}function l(b){b=b.tagName;return b!==c?m[b.toLowerCase()]:b}var m={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},i="source protocol authority userInfo user password host port relative path directory file query fragment".split(" "),n={anchor:"fragment"},h={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}, j=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,k=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g;e.fn.url=function(b){var c="";this.length&&(c=e(this).attr(l(this[0]))||"");return e.url(c,b)};e.url=function(b,e){1===arguments.length&&!0===b&&(e=!0,b=c);b=b||window.location.toString();return{data:g(b,e||!1),attr:function(a){a=n[a]||a;return a!==c?this.data.attr[a]:this.data.attr},param:function(a){return a!==c?this.data.param.query[a]:this.data.param.query},sparam:function(a,d){if(a!==c){this.data.param.query[a]=d;var b=true}else b= false;return b},compileURL:function(){var a=this.attr("base")+this.attr("path");if(this.data.param.query){var a=a+"?",b=[],c;for(c in this.data.param.query)b.push(c+"="+this.data.param.query[c]);a=a+b.join("&")}return a},fparam:function(a){return a!==c?this.data.param.fragment[a]:this.data.param.fragment},segment:function(a){if(a===c)return this.data.seg.path;a=a<0?this.data.seg.path.length+a:a-1;return this.data.seg.path[a]},fsegment:function(a){if(a===c)return this.data.seg.fragment;a=a<0?this.data.seg.fragment.length+ a:a-1;return this.data.seg.fragment[a]}}}})(jQuery);